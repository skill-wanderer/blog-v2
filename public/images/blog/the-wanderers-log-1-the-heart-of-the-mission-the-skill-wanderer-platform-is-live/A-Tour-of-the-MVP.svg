<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1200" height="800" fill="#f8fafc"/>
  
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" font-size="24" font-weight="bold" fill="#1e293b">Current Platform Architecture</text>
  
  <!-- Frontend Section -->
  <rect x="50" y="80" width="300" height="200" rx="10" fill="#e0f2fe" stroke="#0284c7" stroke-width="2"/>
  <text x="200" y="105" text-anchor="middle" font-size="16" font-weight="bold" fill="#1e293b">Frontend</text>
  
  <!-- Nuxt.js -->
  <rect x="70" y="120" width="120" height="60" rx="5" fill="#00dc82" stroke="#00a960" stroke-width="2"/>
  <text x="130" y="140" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Nuxt.js</text>
  <text x="130" y="155" text-anchor="middle" font-size="10" fill="white">Landing Page</text>
  <text x="130" y="168" text-anchor="middle" font-size="10" fill="white">&amp; Hub</text>
  
  <!-- Astro -->
  <rect x="210" y="120" width="120" height="60" rx="5" fill="#ff5d01" stroke="#d63900" stroke-width="2"/>
  <text x="270" y="140" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Astro</text>
  <text x="270" y="155" text-anchor="middle" font-size="10" fill="white">Blog</text>
  
  <!-- Backend Section -->
  <rect x="50" y="320" width="300" height="120" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="200" y="345" text-anchor="middle" font-size="16" font-weight="bold" fill="#1e293b">Backend (Temporary)</text>
  
  <!-- Firebase -->
  <rect x="125" y="360" width="150" height="60" rx="5" fill="#ffca28" stroke="#ff8f00" stroke-width="2"/>
  <text x="200" y="380" text-anchor="middle" font-size="12" font-weight="bold" fill="#1e293b">Firebase</text>
  <text x="200" y="395" text-anchor="middle" font-size="10" fill="#1e293b">Forms &amp; Backend</text>
  <text x="200" y="408" text-anchor="middle" font-size="9" fill="#7c2d12">(Scheduled for replacement)</text>
  
  <!-- LMS Section -->
  <rect x="450" y="80" width="250" height="120" rx="10" fill="#f3e8ff" stroke="#8b5cf6" stroke-width="2"/>
  <text x="575" y="105" text-anchor="middle" font-size="16" font-weight="bold" fill="#1e293b">Learning Management</text>
  
  <!-- Moodle -->
  <rect x="475" y="120" width="200" height="60" rx="5" fill="#ff7800" stroke="#e56600" stroke-width="2"/>
  <text x="575" y="140" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Moodle LMS</text>
  <text x="575" y="155" text-anchor="middle" font-size="10" fill="white">Online Courses</text>
  <text x="575" y="168" text-anchor="middle" font-size="10" fill="white">Learning Core</text>
  
  <!-- SSO/Identity Section -->
  <rect x="800" y="80" width="300" height="200" rx="10" fill="#ecfdf5" stroke="#10b981" stroke-width="2"/>
  <text x="950" y="105" text-anchor="middle" font-size="16" font-weight="bold" fill="#1e293b">Identity &amp; Authentication</text>
  
  <!-- Keycloak -->
  <rect x="825" y="120" width="250" height="80" rx="5" fill="#4285f4" stroke="#1a73e8" stroke-width="2"/>
  <text x="950" y="145" text-anchor="middle" font-size="14" font-weight="bold" fill="white">Keycloak</text>
  <text x="950" y="163" text-anchor="middle" font-size="11" fill="white">Central Identity Provider (IdP)</text>
  <text x="950" y="178" text-anchor="middle" font-size="11" fill="white">Single Sign-On (SSO)</text>
  <text x="950" y="193" text-anchor="middle" font-size="11" fill="white">User Registration</text>
  
  <!-- Email Service Section -->
  <rect x="450" y="320" width="250" height="120" rx="10" fill="#fef2f2" stroke="#ef4444" stroke-width="2"/>
  <text x="575" y="345" text-anchor="middle" font-size="16" font-weight="bold" fill="#1e293b">Email Service</text>
  
  <!-- Amazon SES -->
  <rect x="475" y="360" width="200" height="60" rx="5" fill="#ff9900" stroke="#e67e00" stroke-width="2"/>
  <text x="575" y="380" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Amazon SES</text>
  <text x="575" y="395" text-anchor="middle" font-size="10" fill="white">Transactional Emails</text>
  <text x="575" y="408" text-anchor="middle" font-size="10" fill="white">Registration Confirmations</text>
  
  <!-- Connection Lines -->
  
  <!-- Nuxt.js to Firebase -->
  <line x1="130" y1="180" x2="170" y2="360" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="140" y="270" font-size="10" fill="#64748b">API Calls</text>
  
  <!-- Astro to Firebase -->
  <line x1="270" y1="180" x2="230" y2="360" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="240" y="270" font-size="10" fill="#64748b">Forms</text>
  
  <!-- Moodle to Keycloak -->
  <line x1="675" y1="150" x2="825" y2="150" stroke="#10b981" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="740" y="140" font-size="11" font-weight="bold" fill="#10b981">SSO Integration</text>
  
  <!-- Keycloak to Amazon SES -->
  <line x1="950" y1="200" x2="575" y2="360" stroke="#ef4444" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="750" y="280" font-size="10" fill="#ef4444">Email Triggers</text>
  
  <!-- Frontend to LMS Navigation -->
  <line x1="350" y1="140" x2="450" y2="140" stroke="#8b5cf6" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead2)"/>
  <text x="400" y="130" text-anchor="middle" font-size="10" font-weight="bold" fill="#8b5cf6">Navigation</text>
  
  <!-- LMS to Frontend Navigation (bidirectional) -->
  <line x1="450" y1="160" x2="350" y2="160" stroke="#8b5cf6" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead2)"/>
  <text x="400" y="175" text-anchor="middle" font-size="10" font-weight="bold" fill="#8b5cf6">User Flow</text>
  
  <!-- Data Flow Labels -->
  <rect x="50" y="500" width="1100" height="280" rx="10" fill="#f1f5f9" stroke="#94a3b8" stroke-width="1"/>
  <text x="600" y="525" text-anchor="middle" font-size="18" font-weight="bold" fill="#1e293b">Data Flow &amp; Integration Details</text>
  
  <!-- Flow descriptions -->
  <text x="70" y="555" font-size="14" font-weight="bold" fill="#1e293b">Authentication Flow:</text>
  <text x="70" y="575" font-size="12" fill="#475569">1. Users register/login through Keycloak (central IdP)</text>
  <text x="70" y="595" font-size="12" fill="#475569">2. Moodle LMS uses Keycloak for SSO authentication</text>
  <text x="70" y="615" font-size="12" fill="#475569">3. Amazon SES sends transactional emails triggered by Keycloak events</text>
  
  <text x="70" y="645" font-size="14" font-weight="bold" fill="#1e293b">Frontend Integration:</text>
  <text x="70" y="665" font-size="12" fill="#475569">4. Nuxt.js (landing page) and Astro (blog) connect to Firebase for backend services</text>
  <text x="70" y="685" font-size="12" fill="#475569">5. Firebase handles forms and temporary backend needs (scheduled for replacement)</text>
  <text x="70" y="705" font-size="12" fill="#475569">6. Seamless navigation between Frontend applications and Moodle LMS</text>
  
  <text x="70" y="730" font-size="14" font-weight="bold" fill="#dc2626">Note:</text>
  <text x="70" y="750" font-size="12" fill="#dc2626">Firebase is a temporary solution and will be replaced in the next development phase</text>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
    <marker id="arrowhead2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
    </marker>
  </defs>
  
  <!-- Legend -->
  <rect x="850" y="500" width="250" height="120" rx="5" fill="white" stroke="#94a3b8" stroke-width="1"/>
  <text x="975" y="520" text-anchor="middle" font-size="14" font-weight="bold" fill="#1e293b">Legend</text>
  
  <line x1="870" y1="535" x2="890" y2="535" stroke="#10b981" stroke-width="3"/>
  <text x="900" y="540" font-size="11" fill="#1e293b">SSO Integration</text>
  
  <line x1="870" y1="550" x2="890" y2="550" stroke="#64748b" stroke-width="2"/>
  <text x="900" y="555" font-size="11" fill="#1e293b">API/Data Flow</text>
  
  <line x1="870" y1="565" x2="890" y2="565" stroke="#ef4444" stroke-width="2"/>
  <text x="900" y="570" font-size="11" fill="#1e293b">Email Integration</text>
  
  <line x1="870" y1="580" x2="890" y2="580" stroke="#8b5cf6" stroke-width="2" stroke-dasharray="3,3"/>
  <text x="900" y="585" font-size="11" fill="#1e293b">Navigation Flow</text>
  
  <rect x="870" y="595" width="15" height="10" fill="#fef3c7" stroke="#f59e0b"/>
  <text x="895" y="605" font-size="11" fill="#1e293b">Temporary Component</text>
</svg>